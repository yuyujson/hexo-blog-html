---
title: b+树图文详解
permalink: b+-tree-tu-wen-jiang-jie
date: 2019-06-13 17:09:09
tags:
categories: mysql
---
# b+树图文详解(转)
<!--more-->
[转载自](https://blog.csdn.net/qq_26222859/article/details/80631121)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589478-14eb9760-fa6a-42d2-bb88-c46fd94620b9.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589474-48c993d8-0441-4b9b-a23e-30b0c2758345.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589509-8736f0ff-9215-4e21-b2d5-e362f5f322ef.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589476-76ef0c2e-adc5-453b-9648-c418aae8bab1.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />**一个m阶的B树具有如下几个特征：**<br />1.根结点至少有两个子女。<br />2.每个中间节点都包含k-1个元素和k个孩子，其中 m/2 <= k <= m<br />3.每一个叶子节点都包含k-1个元素，其中 m/2 <= k <= m<br />4.所有的叶子结点都位于同一层。<br />5.每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划。<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589528-d4075698-62c4-4930-b270-5e0e6c2a6041.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />**一个m阶的B+树具有如下几个特征：**<br />1.有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。<br />2.所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。<br />3.所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589471-3186af11-d609-436d-9ceb-364de2f21dfd.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589476-5b9d42b0-8732-4aeb-a00f-1c788d7257cb.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589484-7bb1d0dc-17ea-42c3-a85e-81ef3075c7cf.jpeg#align=left&display=inline&height=328&originHeight=328&originWidth=825&size=0&status=done&width=825)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589522-5002c890-a2ab-4128-b8cc-372c53df9b23.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589492-faff71ce-5837-4d9f-a0da-41a1bde61502.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589521-2acfed97-b6d1-4002-95f3-a0064120669b.jpeg#align=left&display=inline&height=319&originHeight=319&originWidth=826&size=0&status=done&width=826)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589501-3eb8856a-7b23-48bf-8cc3-62135e1ae385.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589530-fd2e230b-564a-4638-a8d0-94fab7482144.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589568-291a6a23-2cd8-439c-bb57-24bfe1b8498a.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589527-7e0b8c44-74bb-4b98-8775-0744a0df63e8.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589511-ee371a52-26bc-4bae-9200-c2f77cdefc83.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589517-3e7149dd-72d0-46ca-a5be-da166e2447a9.jpeg#align=left&display=inline&height=340&originHeight=340&originWidth=851&size=0&status=done&width=851)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589562-ab3b39f5-86e8-47db-80a3-9738049ca1d9.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589532-ca61e798-cec9-43f6-9bdb-de5377a1426c.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />B-树中的卫星数据（Satellite Information）：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589547-d21f7365-1c57-424b-a0ec-b45a1f1d4b3f.jpeg#align=left&display=inline&height=381&originHeight=381&originWidth=787&size=0&status=done&width=787)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589530-9bf09612-1635-4954-aba1-c0b798ece577.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />B+树中的卫星数据（Satellite Information）：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589554-e92c2186-358b-45b4-bb86-a741d27fe738.jpeg#align=left&display=inline&height=384&originHeight=384&originWidth=838&size=0&status=done&width=838)<br />需要补充的是，在数据库的聚集索引（Clustered Index）中，叶子节点直接包含卫星数据。在非聚集索引（NonClustered Index）中，叶子节点带有指向卫星数据的指针。<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589536-58fb4184-29c6-4661-8ba5-93c8f056891e.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589540-ca557831-c35e-470b-ad17-0be9b3a596e1.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589550-417eab8c-40f6-4855-9132-731ab819ed83.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />第一次磁盘IO：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589570-163e1e9b-377f-4275-bd2a-4b6bcb3f2915.jpeg#align=left&display=inline&height=318&originHeight=318&originWidth=826&size=0&status=done&width=826)<br />第二次磁盘IO：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589552-67efb7f2-60a8-41e1-82ff-74ef4e66c580.jpeg#align=left&display=inline&height=310&originHeight=310&originWidth=818&size=0&status=done&width=818)<br />第三次磁盘IO：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589586-95d8b4c4-f0b4-4b93-9b48-0465e21c9df5.jpeg#align=left&display=inline&height=307&originHeight=307&originWidth=817&size=0&status=done&width=817)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589573-ed89e685-6d64-4e04-a6c3-e38f7aa8930b.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589575-fc3ea0f7-3156-4678-9343-bbf168658cf9.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589572-81d63403-57d0-438a-986c-b6492fd3246b.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589589-9f9f3fb9-4bd7-4a8e-976a-755e2ab726b9.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589580-6c5c476c-7be2-4f8a-a554-cc24d90dec36.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589586-4f417277-6548-45d3-ba3d-042fd20fe5de.jpeg#align=left&display=inline&height=300&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />**B-树的范围查找过程**<br />自顶向下，查找到范围的下限（3）：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589584-e69f8d72-0341-4199-8559-9551691ae1ab.jpeg#align=left&display=inline&height=310&originHeight=310&originWidth=774&size=0&status=done&width=774)<br />中序遍历到元素6：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589595-9044d64a-a55a-4f6f-9ef8-54f5b030bc03.jpeg#align=left&display=inline&height=257&originHeight=314&originWidth=779&size=0&status=done&width=779)<br />中序遍历到元素8：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589605-187b66f2-efaf-4a17-bf05-0d2b86a9a2f6.jpeg#align=left&display=inline&height=312&originHeight=312&originWidth=778&size=0&status=done&width=778)<br />中序遍历到元素9：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589615-34b0e6f8-5ff0-4c84-9bc3-fd64dd743021.jpeg#align=left&display=inline&height=256&originHeight=308&originWidth=769&size=0&status=done&width=769)<br />中序遍历到元素11，遍历结束：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589626-0637ddda-7cbb-4aa8-85d6-5825068bbad4.jpeg#align=left&display=inline&height=262&originHeight=318&originWidth=774&size=0&status=done&width=774)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589618-48d5a9ce-44eb-4a30-bba8-0b7c0f43e272.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589621-f6f5aad8-e5b2-4010-873d-bc0334ab56b2.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />**B+树的范围查找过程**<br />自顶向下，查找到范围的下限（3）：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589612-03d1cad2-b413-4927-aa14-be43b2afbb03.jpeg#align=left&display=inline&height=248&originHeight=320&originWidth=825&size=0&status=done&width=825)<br />通过链表指针，遍历到元素6, 8：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589638-14788bcf-3426-4f05-b1f1-d7bc127b5a42.jpeg#align=left&display=inline&height=247&originHeight=319&originWidth=825&size=0&status=done&width=825)<br />通过链表指针，遍历到元素9, 11，遍历结束：<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589643-5241de8c-1f60-473c-8c1a-db456e796978.jpeg#align=left&display=inline&height=242&originHeight=312&originWidth=822&size=0&status=done&width=822)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589650-b37d0f5a-61c9-4997-9140-2e33b4c22365.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589636-a27372bf-a312-4eef-8094-5c419de1d49c.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589655-a615965b-28ad-49f6-91d8-df2b2fdb58ef.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />![](https://cdn.nlark.com/yuque/0/2019/jpeg/178066/1560416589653-5c186e9f-8e23-4b8f-a2e2-9195c2964c52.jpeg#align=left&display=inline&height=295&originHeight=300&originWidth=650&size=0&status=done&width=650)<br />**B+树的特征：**<br />1.有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。<br />2.所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。<br />3.所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。<br />**B+树的优势：**<br />1.单一节点存储更多的元素，使得查询的IO次数更少。<br />2.所有查询都要查找到叶子节点，查询性能稳定。<br />3.所有叶子节点形成有序链表，便于范围查询。